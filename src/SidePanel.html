<!-- src/SidePanel.html
<html>
  <body style="width:100%; height:100%; margin:0;">
    <div>Side Panel</div>
    <button id="start-activity">Launch Main Stage</button>

    <script src="https://anjalirawat09.github.io/meet-addons/dist/main.bundle.js"></script>
    <script>
      // Initialize the addon and attach click listener
      document.addEventListener('DOMContentLoaded', () => {
        meetAddon.setUpAddon();
      });
    </script>
  </body>
</html> -->



<!-- <html>
<head>
  <title>Meet add-on Side Panel</title>
  <script src="https://anjalirawat09.github.io/meet-addons/dist/main.bundle.js"></script>
</head>

<body style="width: 100%; height: 100%; margin: 0">
  <div>This is the add-on Side Panel. Only you can see this.</div>
  <button id="start-activity">Launch Activity in Main Stage.</button>

  <script>
    document.body.onload = () => {
      // Library name (helloWorld) is defined in the webpack config.
      // The function (setUpAddon) is defined in main.js.
      helloWorld.setUpAddon();

      //  Log when your side panel button is clicked
      const startBtn = document.getElementById("start-activity");
      if (startBtn) {
        startBtn.addEventListener("click", () => {
          console.log("Launch Activity button clicked");
        });
      }

      //Log when Google Meet's own buttons are clicked (like Leave, Present)
      const meetButtons = document.querySelectorAll(".VYBDae-Bz112c-RLmnJb");
      meetButtons.forEach(button => {
        button.addEventListener("click", () => {
          console.log("A Google Meet button (class .VfPpkd-vQzf8d) was clicked");
        });
      });
    };
  </script>
</body>
</html> -->


<html>
<head>
  <title>Meet add-on Side Panel</title>
  <script src="https://anjalirawat09.github.io/meet-addons/dist/main.bundle.js"></script>
</head>

<body style="width: 100%; height: 100%; margin: 0">
  <div>This is the add-on Side Panel. Only you can see this.</div>
  
  <!-- Existing button -->
  <button id="start-activity">Launch Activity in Main Stage</button>

  <!-- ✅ New button -->
  <button id="open-passive">Open Passive Referral</button>

  <script>
  document.body.onload = async () => {
    // ✅ Now get sidePanelClient directly
    const sidePanelClient = await helloWorld.setUpAddon();

    // ✅ Get meet details
    const meetDetails = await sidePanelClient.getMeetDetails();
    const meetUrl = meetDetails.meetingUri;

    console.log("Current Google Meet URL:", meetUrl);

    const passiveBtn = document.getElementById("open-passive");
    if (passiveBtn) {
      passiveBtn.addEventListener("click", () => {
        const targetUrl = `https://passivereferral.com/?meetUrl=${encodeURIComponent(meetUrl)}`;
        console.log("Opening Passive Referral with:", targetUrl);
        window.open(targetUrl, "_blank");
      });
    }
  };
  </script>
</body>
</html>
